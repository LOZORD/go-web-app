<html>
  <head></head>
  <body>
    <div class='container'>
      <div class='page-title'>
        <h1>Book Base</h1>
        <hr>
      </div>
      <div id='library'>
        <h2>Your Book Library</h2>
        <pre>{{ library here }}</pre>
      </div>
      <div>
        <h2>Add A Book</h2>
        <div id='alerts'></div>
        <form id='add-form'>
          <div class='form-group'>
            <label for='title'>Book Title</label>
            <input id='title-input' name='title' placeholder='Title'></input>
          </div>
          <div class='form-group'>
            <label for='author'>Book Author</label>
            <input id='author-input' name='author' placeholder='Author'></input>
          </div>
          <div class='form-group'>
            <input type='submit'></input>
          </div>
        </form>
      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script>
      console.log('should exist', $);
      $(function() {
        $('#add-form').submit(function(event) {
          event.preventDefault();
          var newBook = {
            title: $('#title-input').val().trim(),
            author: $('#author-input').val().trim()
          };

          console.log('sending: ', newBook);

          $.post('http://localhost:8080/addBook', newBook)
          .then(function(data) {
            console.log('SUCCESS!', data);

            var alertDiv = $('<div>');

            if (data.bookAdded) {
              console.log('book was added!');
              //$('<div>Added ' + newBook.title + '!<br></div>').appendTo($('#alerts')).fadeOut(5000);
              alertDiv
              .text('Added ' + data.title + '!')
              .append('<br>')
              .appendTo($('#alerts'))
              .fadeOut(3000);
            } else {
              console.log('book was not added');
              //$('<div>' + newBook.title + ' already exists in the Book Base!<br></div>').appendTo($('#alerts')).fadeOut(5000);
              alertDiv
              .text(data.title + ' already exists in the Book Base!')
              .append('<br>')
              .appendTo($('#alerts'))
              .fadeOut(3000);
            }
          },function(data, textStatus, error) {
              console.log('FAILURE!');
              console.log(arguments);
              console.log(error);
          });
        });

        function getLibrary() {
          console.log('TODO');
        }
      });
    </script>
  </body>
</html>
